<!DOCTYPE html>
<html>
    <head>
        
        <link rel="stylesheet" href="css/form.css">
    </head>

    <body>
        <form class="formContainer">
            <div class="question">
                <label>Where will you be going?</label><br>
                <input id="location" class="inputForm" type="text" required></input><br>
            </div>

            <div class="question">
                <label>When will you be staying there?</label><br>
                <input id="start" class="inputForm" type="date" required></input><br>
            </div>

            <div class="question">
                <label>When will you be leaving?</label><br>
                <input id="end" class="inputForm" type="date" required></input><br>
            </div>
            
            <div class="question">
                <label>How many people are going (including yourself)?</label><br>
                <input id="end" class="inputForm" type="date" required></input><br>
            </div>

            <div class="question">
                <label>What is your group's overall budget for this trip?</label><br>
                <input id="budget" class="inputForm" type="number" required></input><br>
            </div>

            <div class="question">
                <label>What are everyone's interests?</label><br>
                <input id="interests" class="inputForm" type="type" required></input><br>
                
                <ul id="options">
                    
                </ul>
            </div>

            <br />
        </form>

        <button onclick="generateInputJSON()">Submit</button>
    </body>

    <script>
        interests = []
        function makeInterestsOption() {
            const interestsInput = document.getElementById("interests");
            const optionsContainer = document.getElementById("options");
            const options = ["Art", "Eating", " Shopping", "Sports", "Comics", "Reading", "History", "Sightseeing", "Photography", "Music", "Technology", "Education", "Outdoor Activities", "Indoor Activities"]
            for (let i = 0; i < options.length; i++) {
                option = document.createElement('li');
                option.innerHTML = options[i]
                option.addEventListener("click", function() {
                    if (!(interests.includes(this.innerHTML))) {
                        interests.push(this.innerHTML)
                    }
                    else {
                        interests.pop(this.innerHTML)
                    }

                    interestsInput.value = interests;
                })

                optionsContainer.appendChild(option)
            }
        }
        makeInterestsOption()

        function generateInputJSON() {
            const answers = {
                "location": document.getElementById("location").value,
                "start": document.getElementById("start").value,
                "end": document.getElementById("end").value,
                "budget": document.getElementById("budget").value,
                "interests": document.getElementById("interests").value
            }

            // fetch(`https://0e2a-209-52-88-186.ngrok-free.app/itenary/activities?location=${answers[0]["answer"]}&startDate=${answers[1]["answer"]}&endDate=${answers[2]["answer"]}&budget=${answers[3]["answer"]}`, {
            //     method: 'GET',
            //     mode: 'cors'
            // })
            // .then(res => {
            //     res = res.json();
            // })
            // .then(jsonData => {
            //     console.log(jsonData)
            // })
            // .catch(err => {
            //     console.log(err)
            // })
            
            console.log(answers)
        }
    </script>
</html>